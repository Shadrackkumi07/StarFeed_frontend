{"ast":null,"code":"var _jsxFileName = \"D:\\\\CoSchedule\\\\coschedule_frontend\\\\src\\\\components\\\\CommentItem.jsx\",\n  _s = $RefreshSig$();\n// src/components/CommentItem.jsx\nimport React, { useState } from 'react';\nimport { PencilIcon, TrashIcon, CheckIcon, XIcon } from '@heroicons/react/24/outline';\nimport TextareaAutosize from 'react-textarea-autosize';\nimport { formatDistanceToNow } from 'date-fns';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CommentItem({\n  comment: c,\n  currentUser,\n  onEditedOrDeleted,\n  setError\n}) {\n  _s();\n  var _c$authorEmail;\n  const isOwner = c.userId === currentUser.uid;\n  const [editing, setEditing] = useState(false);\n  const [editText, setEditText] = useState(c.text);\n  const [loading, setLoading] = useState(false);\n  const saveEdit = async () => {\n    setLoading(true);\n    try {\n      const token = await currentUser.getIdToken();\n      await api.put(`/comments/${c._id}`, {\n        text: editText\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setEditing(false);\n      onEditedOrDeleted();\n    } catch {\n      setError('Could not update comment');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const deleteComment = async () => {\n    setLoading(true);\n    try {\n      const token = await currentUser.getIdToken();\n      await api.delete(`/comments/${c._id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      onEditedOrDeleted();\n    } catch {\n      setError('Could not delete comment');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-8 w-8 rounded-full bg-indigo-400 flex items-center justify-center text-white font-semibold uppercase\",\n          children: ((_c$authorEmail = c.authorEmail) === null || _c$authorEmail === void 0 ? void 0 : _c$authorEmail[0]) || currentUser.email[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"font-medium\",\n            children: c.authorEmail || currentUser.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs text-gray-500\",\n            children: formatDistanceToNow(new Date(c.createdAt), {\n              addSuffix: true\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), isOwner && !editing && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setEditing(true),\n          children: /*#__PURE__*/_jsxDEV(PencilIcon, {\n            className: \"h-5 w-5 text-blue-500 hover:text-blue-700\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: deleteComment,\n          disabled: loading,\n          children: /*#__PURE__*/_jsxDEV(TrashIcon, {\n            className: \"h-5 w-5 text-red-500 hover:text-red-700\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), editing ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-3 space-y-2\",\n      children: [/*#__PURE__*/_jsxDEV(TextareaAutosize, {\n        minRows: 2,\n        maxRows: 4,\n        className: \"w-full p-2 border rounded-lg resize-none\",\n        value: editText,\n        onChange: e => setEditText(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveEdit,\n          disabled: loading,\n          className: \"p-2 rounded-full hover:bg-green-100\",\n          children: /*#__PURE__*/_jsxDEV(CheckIcon, {\n            className: \"h-5 w-5 text-green-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setEditing(false),\n          className: \"p-2 rounded-full hover:bg-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(XIcon, {\n            className: \"h-5 w-5 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-3 text-gray-800 dark:text-gray-200 leading-relaxed\",\n      children: c.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(CommentItem, \"Jg+fyeYd21ZPZl1sviQ5zAiMcBQ=\");\n_c = CommentItem;\nvar _c;\n$RefreshReg$(_c, \"CommentItem\");","map":{"version":3,"names":["React","useState","PencilIcon","TrashIcon","CheckIcon","XIcon","TextareaAutosize","formatDistanceToNow","jsxDEV","_jsxDEV","CommentItem","comment","c","currentUser","onEditedOrDeleted","setError","_s","_c$authorEmail","isOwner","userId","uid","editing","setEditing","editText","setEditText","text","loading","setLoading","saveEdit","token","getIdToken","api","put","_id","headers","Authorization","deleteComment","delete","className","children","authorEmail","email","fileName","_jsxFileName","lineNumber","columnNumber","Date","createdAt","addSuffix","onClick","disabled","minRows","maxRows","value","onChange","e","target","_c","$RefreshReg$"],"sources":["D:/CoSchedule/coschedule_frontend/src/components/CommentItem.jsx"],"sourcesContent":["// src/components/CommentItem.jsx\r\nimport React, { useState } from 'react';\r\nimport { PencilIcon, TrashIcon, CheckIcon, XIcon } from '@heroicons/react/24/outline';\r\nimport TextareaAutosize from 'react-textarea-autosize';\r\nimport { formatDistanceToNow } from 'date-fns';\r\n\r\nexport default function CommentItem({ comment: c, currentUser, onEditedOrDeleted, setError }) {\r\n  const isOwner = c.userId === currentUser.uid;\r\n  const [editing, setEditing] = useState(false);\r\n  const [editText, setEditText] = useState(c.text);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const saveEdit = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const token = await currentUser.getIdToken();\r\n      await api.put(`/comments/${c._id}`, { text: editText }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setEditing(false);\r\n      onEditedOrDeleted();\r\n    } catch {\r\n      setError('Could not update comment');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const deleteComment = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const token = await currentUser.getIdToken();\r\n      await api.delete(`/comments/${c._id}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      onEditedOrDeleted();\r\n    } catch {\r\n      setError('Could not delete comment');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-md\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"h-8 w-8 rounded-full bg-indigo-400 flex items-center justify-center text-white font-semibold uppercase\">\r\n            {c.authorEmail?.[0] || currentUser.email[0]}\r\n          </div>\r\n          <div>\r\n            <p className=\"font-medium\">{c.authorEmail || currentUser.email}</p>\r\n            <p className=\"text-xs text-gray-500\">\r\n              {formatDistanceToNow(new Date(c.createdAt), { addSuffix: true })}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {isOwner && !editing && (\r\n          <div className=\"flex space-x-2\">\r\n            <button onClick={() => setEditing(true)}>\r\n              <PencilIcon className=\"h-5 w-5 text-blue-500 hover:text-blue-700\" />\r\n            </button>\r\n            <button onClick={deleteComment} disabled={loading}>\r\n              <TrashIcon className=\"h-5 w-5 text-red-500 hover:text-red-700\" />\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {editing ? (\r\n        <div className=\"mt-3 space-y-2\">\r\n          <TextareaAutosize\r\n            minRows={2}\r\n            maxRows={4}\r\n            className=\"w-full p-2 border rounded-lg resize-none\"\r\n            value={editText}\r\n            onChange={e => setEditText(e.target.value)}\r\n          />\r\n          <div className=\"flex justify-end space-x-2\">\r\n            <button onClick={saveEdit} disabled={loading} className=\"p-2 rounded-full hover:bg-green-100\">\r\n              <CheckIcon className=\"h-5 w-5 text-green-500\" />\r\n            </button>\r\n            <button onClick={() => setEditing(false)} className=\"p-2 rounded-full hover:bg-gray-200\">\r\n              <XIcon className=\"h-5 w-5 text-gray-500\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p className=\"mt-3 text-gray-800 dark:text-gray-200 leading-relaxed\">\r\n          {c.text}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}