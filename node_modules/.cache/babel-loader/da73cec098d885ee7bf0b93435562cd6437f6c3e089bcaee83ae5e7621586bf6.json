{"ast":null,"code":"// src/pages/Home.jsx\nimport React,{useEffect,useState}from'react';import{useAuth}from'../auth/AuthProvider';import StoryList from'../components/StoryList';import api from'../api';import'../styles/Home.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Home(){const{currentUser,logout}=useAuth();const[stories,setStories]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[searchMode,setSearchMode]=useState(false);const[searchTerm,setSearchTerm]=useState('');// Fetch top stories\nasync function fetchTopStories(){setLoading(true);setError('');try{const resp=await api.get('/topstories?limit=20');setStories(resp.data);setSearchMode(false);}catch{setError('Could not load top stories.');}finally{setLoading(false);}}// Search stories\nasync function handleSearch(q){if(!q.trim())return;setLoading(true);setError('');try{const resp=await api.get('/search',{params:{q,limit:10}});setStories(resp.data);setSearchMode(true);}catch{setError('Search failed.');}finally{setLoading(false);}}useEffect(()=>{fetchTopStories();},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"app-logo\",children:\"StarFeed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"search-container\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"input-container\",onSubmit:e=>{e.preventDefault();handleSearch(searchTerm);},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",placeholder:\"search...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value)}),/*#__PURE__*/_jsx(\"span\",{className:\"icon\",onClick:()=>handleSearch(searchTerm),children:/*#__PURE__*/_jsxs(\"svg\",{width:\"19px\",height:\"19px\",viewBox:\"0 0 24 24\",fill:\"none\",xmlns:\"http://www.w3.org/2000/svg\",children:[/*#__PURE__*/_jsx(\"path\",{opacity:\"1\",d:\"M14 5H20\",stroke:\"#000\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{opacity:\"1\",d:\"M14 8H17\",stroke:\"#000\",strokeWidth:\"1.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2\",stroke:\"#000\",strokeWidth:\"2.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"}),/*#__PURE__*/_jsx(\"path\",{opacity:\"1\",d:\"M22 22L20 20\",stroke:\"#000\",strokeWidth:\"3.5\",strokeLinecap:\"round\",strokeLinejoin:\"round\"})]})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"app-user\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"app-user__email\",children:currentUser.email}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"app-user__logout\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"app-main\",children:[searchMode&&/*#__PURE__*/_jsxs(\"button\",{onClick:fetchTopStories,className:\"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-white bg-gradient-to-r from-indigo-500 to-purple-500 shadow-md hover:from-indigo-600 hover:to-purple-600 transition-all duration-200\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\u2190\"}),\"Back to Top Stories\"]}),/*#__PURE__*/_jsx(\"h2\",{className:\"app-title\",children:searchMode?'Search Results':'Top Stories'}),/*#__PURE__*/_jsx(StoryList,{stories:stories,loading:loading,error:error})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useAuth","StoryList","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Home","currentUser","logout","stories","setStories","loading","setLoading","error","setError","searchMode","setSearchMode","searchTerm","setSearchTerm","fetchTopStories","resp","get","data","handleSearch","q","trim","params","limit","children","className","onSubmit","e","preventDefault","type","placeholder","value","onChange","target","onClick","width","height","viewBox","fill","xmlns","opacity","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","email"],"sources":["D:/CoSchedule/coschedule_frontend/src/pages/Home.jsx"],"sourcesContent":["// src/pages/Home.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useAuth } from '../auth/AuthProvider';\r\nimport StoryList   from '../components/StoryList';\r\nimport api         from '../api';\r\nimport '../styles/Home.css';\r\n\r\nexport default function Home() {\r\n  const { currentUser, logout } = useAuth();\r\n\r\n  const [stories, setStories]     = useState([]);\r\n  const [loading, setLoading]     = useState(true);\r\n  const [error, setError]         = useState('');\r\n  const [searchMode, setSearchMode] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  // Fetch top stories\r\n  async function fetchTopStories() {\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const resp = await api.get('/topstories?limit=20');\r\n      setStories(resp.data);\r\n      setSearchMode(false);\r\n    } catch {\r\n      setError('Could not load top stories.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  // Search stories\r\n  async function handleSearch(q) {\r\n    if (!q.trim()) return;\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      const resp = await api.get('/search', { params: { q, limit: 10 } });\r\n      setStories(resp.data);\r\n      setSearchMode(true);\r\n    } catch {\r\n      setError('Search failed.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    fetchTopStories();\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <header className=\"app-header\">\r\n        <div className=\"app-logo\">StarFeed</div>\r\n\r\n        <div className=\"search-container\">\r\n          <form\r\n            className=\"input-container\"\r\n            onSubmit={e => {\r\n              e.preventDefault();\r\n              handleSearch(searchTerm);\r\n            }}\r\n          >\r\n            <input\r\n              type=\"text\"\r\n              className=\"input\"\r\n              placeholder=\"search...\"\r\n              value={searchTerm}\r\n              onChange={e => setSearchTerm(e.target.value)}\r\n            />\r\n            <span\r\n              className=\"icon\"\r\n              onClick={() => handleSearch(searchTerm)}\r\n            >\r\n              <svg\r\n                width=\"19px\"\r\n                height=\"19px\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path\r\n                  opacity=\"1\"\r\n                  d=\"M14 5H20\"\r\n                  stroke=\"#000\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  opacity=\"1\"\r\n                  d=\"M14 8H17\"\r\n                  stroke=\"#000\"\r\n                  strokeWidth=\"1.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  d=\"M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2\"\r\n                  stroke=\"#000\"\r\n                  strokeWidth=\"2.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n                <path\r\n                  opacity=\"1\"\r\n                  d=\"M22 22L20 20\"\r\n                  stroke=\"#000\"\r\n                  strokeWidth=\"3.5\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                />\r\n              </svg>\r\n            </span>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"app-user\">\r\n          <span className=\"app-user__email\">{currentUser.email}</span>\r\n          <button onClick={logout} className=\"app-user__logout\">\r\n            Logout\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"app-main\">\r\n        {searchMode && (\r\n          <button\r\n  onClick={fetchTopStories}\r\n  className=\"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium text-white bg-gradient-to-r from-indigo-500 to-purple-500 shadow-md hover:from-indigo-600 hover:to-purple-600 transition-all duration-200\"\r\n>\r\n  <span className=\"text-xl\">‚Üê</span>\r\n  Back to Top Stories\r\n</button>\r\n\r\n        )}\r\n        <h2 className=\"app-title\">\r\n          {searchMode ? 'Search Results' : 'Top Stories'}\r\n        </h2>\r\n        <StoryList\r\n          stories={stories}\r\n          loading={loading}\r\n          error={error}\r\n        />\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}